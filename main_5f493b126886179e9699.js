!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(1);var a=document.body.clientWidth,l=document.body.clientHeight,c=a>l?l:a,h=new Audio("./sounds/ping.ogg"),u=new Audio("./sounds/pong.ogg"),f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t),this.x=e,this.y=n}return s(t,[{key:"len",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},set:function(t){var e=t/this.len;this.x*=e,this.y*=e}}]),t}(),y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t),this.pos=new f(0,0),this.size=new f(e,n)}return s(t,[{key:"left",get:function(){return this.pos.x-this.size.x/2}},{key:"right",get:function(){return this.pos.x+this.size.x/2}},{key:"top",get:function(){return this.pos.y-this.size.y/2}},{key:"bottom",get:function(){return this.pos.y+this.size.y/2}}]),t}(),p=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,.04*c,.04*c));return t.vel=new f,t}return o(e,t),e}(y),v=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,.04*c,.2*c));return t.vel=new f,t.score=0,t.lastPos=new f,t}return o(e,t),s(e,[{key:"update",value:function(t){this.vel.y=(this.pos.y-this.lastPos.y)/t,this.lastPos.y=this.pos.y}}]),e}(y),d=function(){function t(e){var n=this;r(this,t),this.canvas=e,this.context=e.getContext("2d"),this.initialSpeed=600,this.ball=new p,this.players=[new v,new v],this.players[0].pos.x=40,this.players[1].pos.x=this.canvas.width-40,this.players.forEach(function(t){return t.pos.y=n.canvas.height/2});var i=null;this.frameCallback=function(t){if(null!==i){var e=t-i;n.update(e/1e3)}i=t,requestAnimationFrame(n.frameCallback)},this.CHAR_PIXEL=.025*c,this.CHARS=["111101101101111","010010010010010","111001111100111","111001111001111","101101111001001","111100111001111","111100111101111","111001001001001","111101111101111","111101111001111"].map(function(t){var e=document.createElement("canvas"),i=n.CHAR_PIXEL;e.height=5*i,e.width=3*i;var o=e.getContext("2d");return o.fillStyle="#fff",t.split("").forEach(function(t,e){"1"===t&&o.fillRect(e%3*i,(e/3|0)*i,i,i)}),e}),this.reset()}return s(t,[{key:"clear",value:function(){this.context.fillStyle="#000",this.context.fillRect(0,0,this.canvas.width,this.canvas.height)}},{key:"collide",value:function(t,e){if(t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top){e.vel.x=1.05*-e.vel.x;var n=e.vel.len;e.vel.y+=.2*t.vel.y,e.vel.len=n,u.play()}}},{key:"draw",value:function(){var t=this;this.clear(),this.drawRect(this.ball),this.players.forEach(function(e){return t.drawRect(e)}),this.drawScore()}},{key:"drawRect",value:function(t){this.context.fillStyle="#fff",this.context.fillRect(t.left,t.top,t.size.x,t.size.y)}},{key:"drawScore",value:function(){var t=this,e=this.canvas.width/3,n=4*this.CHAR_PIXEL;this.players.forEach(function(i,o){var r=i.score.toString().split(""),s=e*(o+1)-n*r.length/2+t.CHAR_PIXEL/2;r.forEach(function(e,i){t.context.drawImage(t.CHARS[0|e],s+i*n,20)})})}},{key:"play",value:function(){var t=this.ball;0===t.vel.x&&0===t.vel.y&&(t.vel.x=200*(Math.random()>.5?1:-1),t.vel.y=200*(2*Math.random()-1),t.vel.len=this.initialSpeed)}},{key:"reset",value:function(){var t=this.ball;t.vel.x=0,t.vel.y=0,t.pos.x=this.canvas.width/2,t.pos.y=this.canvas.height/2}},{key:"start",value:function(){requestAnimationFrame(this.frameCallback)}},{key:"update",value:function(t){var e=this,n=this.canvas,i=this.ball;i.pos.x+=i.vel.x*t,i.pos.y+=i.vel.y*t,(i.right<0||i.left>n.width)&&(++this.players[i.vel.x<0|0].score,this.reset()),(i.vel.y<0&&i.top<0||i.vel.y>0&&i.bottom>n.height)&&(i.vel.y=-i.vel.y,h.play()),this.players[1].pos.y=i.pos.y,this.players.forEach(function(n){n.update(t),e.collide(n,i)}),this.draw()}}]),t}(),g=document.getElementById("pong");g.width=a,g.height=l;var b=new d(g);g.addEventListener("click",function(){return b.play()}),g.addEventListener("mousemove",function(t){b.players[0].pos.y=t.offsetY}),b.start()},function(t,e){}]);
//# sourceMappingURL=main_5f493b126886179e9699.js.map